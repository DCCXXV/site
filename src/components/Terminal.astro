<section id="frame">
    <div id="terminal">
        <div id="output">
            Hello world!<br />Type 'help' to see available commands<br /><br />
        </div>
        <div id="input-line">
            <span>guest@dccxxv.dev:~$</span>
            <input type="text" id="terminal-input" autofocus />
        </div>
    </div>
</section>

<style>
    #frame {
        background-color: var(--sol-metal);
        border: var(--sol-dark) 1px solid;
        margin: 1rem 0rem;
    }
    #terminal {
        background-color: var(--sol-black);
        color: var(--sol-yellow);
        height: 500px;
        padding: 0.5rem;
        font-family: "Courier New", monospace;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        font-variant-emoji: text;
    }
    #input-line {
        display: flex;
        gap: 0.5rem;
    }
    #terminal-input {
        background: var(--sol-black);
        border: none;
        color: var(--sol-yellow);
        font-family: "Courier New", monospace;
        font-size: 1rem;
        outline: none;
        flex-grow: 1;
    }
    #terminal::-webkit-scrollbar {
        width: 8px;
    }
    #terminal::-webkit-scrollbar-track {
        background: var(--sol-black);
    }
    #terminal::-webkit-scrollbar-thumb {
        background: var(--sol-yellow);
    }

    ::selection {
        color: var(--sol-black);
        background-color: var(--sol-yellow);
    }
</style>

<script>
    const commands: { [key: string]: string } = {
        help: `Available commands:
  help     - Show this message
  about    - Learn more about me
  skills   - View my technical skills
  projects - See my latest projects
  contact  - Get my contact info
  clear    - Clear the terminal
  whoami   - Who am I?`,

        about: `Read above ^^`,

        skills: `Table below has (almost) everything :-)`,

        projects: `You can look at my latest projects in the Projects tab above!
Or visit my GitHub for more: https://github.com/DCCXXV`,

        contact: `ðŸ“§ Email: marcoantonioperezneira@gmail.com
ðŸ“± X: @DCCXXV_
ðŸ™ GitHub: DCCXXV`,

        whoami: `guest`,

        clear: "CLEAR",
    };

    const terminal = document.getElementById("terminal")!;
    const output = document.getElementById("output")!;
    const input = document.getElementById(
        "terminal-input",
    )! as HTMLInputElement;

    terminal.addEventListener("click", () => input.focus());

    input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
            const command = input.value.trim().toLowerCase();

            output.innerHTML += `guest@dccxxv.dev:~$ ${input.value}<br>`;

            if (command === "clear") {
                output.innerHTML = "";
            } else if (commands[command]) {
                output.innerHTML +=
                    commands[command]
                        .replace(/\n/g, "<br>")
                        .replace(/\ /g, "&nbsp;") + "<br><br>";
            } else if (command === "") {
                output.innerHTML += "<br>";
            } else {
                output.innerHTML += `Command not found: ${command}<br>Type 'help' for available commands<br><br>`;
            }

            input.value = "";
            terminal.scrollTop = terminal.scrollHeight;
        }
    });
</script>
