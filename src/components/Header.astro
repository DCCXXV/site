---
import LanguageSwitcher from "./LanguageSwitcher.astro";
import { MoveUpRight } from "lucide-astro";
import {
    getLangFromUrl,
    useTranslations,
    useTranslatedPath,
} from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const tPath = useTranslatedPath(lang);
const currentPath = Astro.url.pathname;
---

<header>
    <div id="top-bar">
        <div>
            <p id="site-name" class="cardo-bold">DCCXXV.DEV</p>
            <p id="fullname" class="voltaire-regular">
                Marco Antonio PÃ©rez Neira
            </p>
        </div>
        <LanguageSwitcher />
    </div>
    <nav>
        <ul>
            <li
                class=`bg-yellow ${currentPath === tPath("/") ? "active" : ""}`
                }
            >
                <a href={tPath("/")}>{t("nav.about")}</a>
            </li>
            <li
                class={`bg-cyan ${currentPath === tPath("/projects") || currentPath === `${tPath("/projects")}/` ? "active" : ""}`}
            >
                <a href={tPath("/projects")}>{t("nav.projects")}</a>
            </li>
            <li
                class=`bg-pink ${currentPath.startsWith(tPath("/blog")) ? "active" : ""}`
                }
            >
                <a href={tPath("/blog")}>{t("nav.blog")}</a>
            </li>
            <li class="bg-teal">
                <a href="https://github.com/DCCXXV/">
                    Github <MoveUpRight size={15} />
                </a>
            </li>
        </ul>
    </nav>
</header><style>
    header {
        margin: 1.5rem;
    }

    #top-bar {
        padding: 0.5rem 0.5rem 0.5rem 0.5rem;
        border: var(--sol-black) 1px solid;
        background-color: var(--sol-metal);
        display: grid;
        grid-template-columns: 1fr auto;
        align-items: flex-end;
        gap: 1rem;

        /*box-shadow: -2px 2px 0 var(--sol-dark);*/
    }

    #site-name {
        font-size: 32px;
    }

    #fullname {
        font-size: 20px;
        padding-bottom: 1.5rem;
    }

    nav {
        position: sticky;
    }

    ul {
        display: flex;
        gap: 0.25rem;
        list-style-type: none;
    }

    li {
        padding: 0.25rem 0rem;
        border: var(--sol-black) 1px solid;
        margin-top: 0.25rem;
    }

    a {
        padding: 0rem 2rem;
        color: var(--sol-black);
        text-decoration: none;
    }

    li:has(a:hover) {
        filter: brightness(0.9);
    }

    .active {
        text-decoration: underline;
    }

    @media (max-width: 769px) {
        header {
            margin: 1rem;
        }

        ul {
            width: 100%;
        }

        li {
            text-align: center;
            flex: 1;
        }

        a {
            padding: 0rem;
            white-space: nowrap;
        }
    }
</style>
