---
import BaseLayout from "../layouts/BaseLayout.astro";
import type { CollectionEntry } from "astro:content";
import { getCollection } from "astro:content";

const projects = await getCollection("projects", ({ id }) => {
    return id.startsWith("en/");
});
const sortedProjects = projects.sort(
    (a: CollectionEntry<"projects">, b: CollectionEntry<"projects">) =>
        a.data.rank - b.data.rank,
);
---

<BaseLayout title="Projects" pageHeader="Projects" lang="en">
    Some personal projects I've built for fun and learning :^)
    <div class="projects-list">
        {
            sortedProjects.map((project) => (
                <article class="project-card">
                    <span class="size-badge">
                        <span class="size-label">size</span>
                        <span class="size-value">{project.data.size}</span>
                    </span>
                    <a href={`/projects/${project.slug}`}>
                        <h2>{project.data.title}</h2>
                    </a>
                    <p class="description">{project.data.description}</p>
                    {project.data.tags && (
                        <div class="tags">
                            {project.data.tags.map((tag) => (
                                <span class="tag">{tag}</span>
                            ))}
                        </div>
                    )}
                </article>
            ))
        }
    </div>
</BaseLayout>
<style>
    h2 {
        margin-bottom: 0.5rem;
        padding-right: 5.5rem;
    }

    a {
        color: var(--sol-dark) !important;
    }

    .project-card {
        position: relative;
        padding: 1rem;
        margin-top: 0.5rem;
        background-color: var(--sol-metal);
        border: 1px solid var(--sol-dark);
    }

    .size-badge {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        display: flex;
        border: 1px solid var(--sol-dark);
        font-size: 0.75rem;
        z-index: 1;
    }

    .size-label {
        padding: 0.15rem 0.4rem;
        background-color: var(--sol-dark);
        color: var(--sol-metal);
    }

    .size-value {
        padding: 0.15rem 0.4rem;
        background-color: var(--sol-metal);
        color: var(--sol-dark);
    }

    .tags {
        margin-top: 1rem;
    }

    .tag {
        padding: 0.25rem 0.5rem;
        margin-right: 5px;
        color: var(--sol-dark);
        border: 1px dashed var(--sol-dark);
    }
</style>
