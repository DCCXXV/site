---
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";

export async function getStaticPaths() {
    const projects = await getCollection("projects");

    return projects.map((project: CollectionEntry<"projects">) => {
        const [lang] = project.slug.split("/");

        return {
            params: {
                slug: project.slug,
            },
            props: { project, lang },
        };
    });
}

type Props = {
    project: CollectionEntry<"projects">;
    lang: string;
};

const { project, lang } = Astro.props;
const { Content } = await project.render();
---

<BaseLayout
    title={project.data.title}
    pageHeader={project.data.title}
    lang={lang}
>
    <Content />
</BaseLayout>
